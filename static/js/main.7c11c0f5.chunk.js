(this["webpackJsonpmigr-routine"]=this["webpackJsonpmigr-routine"]||[]).push([[0],{30:function(e,t,n){e.exports=n(45)},42:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"requestExerciseList",(function(){return S})),n.d(r,"requestExercises",(function(){return _})),n.d(r,"receiveExercisesSuccess",(function(){return R})),n.d(r,"receiveExercisesError",(function(){return h})),n.d(r,"startExercise",(function(){return k})),n.d(r,"ActionTypes",(function(){return x}));var a=n(0),c=n.n(a),i=n(9),o=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(1),u=n(21),l=n(22),E=n(18),m=n(24),d=n.n(m),f=function(e){return function(e){return function(t){var n=e(t);return t.type,n}}},v=n(29),p=n(14),b=n.n(p),C=n(25),S=function(){return function(){var e=Object(C.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_()),e.next=3,fetch("/migr-routine/exercise_list.json").then((function(e){return e.json()})).then((function(e){console.log("fetced data",e),t(R(e))})).catch((function(e){console.warn("data fetch error",e),t(h("Could not fetch data"))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x={REQUEST_EXERCISES:"REQUEST_EXERCISES",RECEIVE_EXERCISES_SUCCESS:"RECEIVE_EXERCISES_SUCCESS",RECEIVE_EXERCISES_ERROR:"RECEIVE_EXERCISES_ERROR",START_EXERCISE:"START_EXERCISE",STOP_EXERCISE:"STOP_EXERCISE"};function _(){return{type:x.REQUEST_EXERCISES}}function R(e){return{type:x.RECEIVE_EXERCISES_SUCCESS,payload:e}}function h(e){return{type:x.RECEIVE_EXERCISES_ERROR,payload:e}}function k(e){return{type:x.START_EXERCISE,payload:e}}var g={previous:null,current:null};var O=Object(s.combineReducers)({exercise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.START_EXERCISE:return null===e.current?Object(v.a)({},e,{current:t.payload}):{previous:e.current,current:t.payload};case x.STOP_EXERCISE:return g;default:return e}},exerciseList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.RECEIVE_EXERCISES_SUCCESS:return t.payload.exerciseList;default:return e}}}),y={key:"root",whitelist:["exerciseList"],storage:d.a},j=Object(E.a)(y,O);var I=n(4),w=n(26),X=n(7),N=n(5),T=(n(42),n(11)),A=n(27),L=(n(43),n(15)),V=n.n(L);var B=c.a.memo((function(e){var t=e.play,n=e.playCallback,r=e.nextCallback,a=e.previousCallback,i=(e.disabled,V()("exercise-controls",{})),o=V()({"exercise-controls__play":!t,"exercise-controls__pause":t});return c.a.createElement("div",{className:i},c.a.createElement("span",{className:"exercise-controls__previous",onClick:a}),c.a.createElement("span",{className:o,onClick:function(){n()}}),c.a.createElement("span",{className:"exercise-controls__next",onClick:r}))}));var U=c.a.memo((function(e){var t=e.title,n=e.onCloseCallback;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__text"},t),c.a.createElement("span",{className:"header__icon icon--close",onClick:n}))}));var q=function(e){var t=e.children;return c.a.createElement("div",{className:"footer"},t)};function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e){var r=new Audio("/migr-routine/sounds/"+e),a=function e(){r.removeEventListener("ended",e),0===(n-=1)?"function"===typeof t&&t():(r.addEventListener("ended",e),r.play())};r.addEventListener("ended",a),r.play()}else console.warn("Sound: "+e+" was not found")}var Q=function(e){var t=e.exerciseList,n=e.actions,r=e.match.params.id,i=Object(N.f)();Object(a.useEffect)((function(){n.requestExerciseList(r)}),[n,r]);var o=t[0];return c.a.createElement("div",{className:"exercise-list"},c.a.createElement(U,{title:"RA routine",onCloseCallback:function(){i.goBack()}}),c.a.createElement("div",{className:"exercise-list__body"},t.map((function(e){return c.a.createElement("div",{key:e.id,className:"exercise-list__item"},e.name)}))),c.a.createElement(q,null,c.a.createElement("div",{className:"exercise-list__start",onClick:function(){(new Audio).play(),n.startExercise(o),i.push("/migr-routine/exercise/1")}},"Start")))};var W=function(){var e=Object(N.f)();return c.a.createElement("div",{className:"routine-list"},c.a.createElement("div",{className:"routine",onClick:function(){e.push("".concat("/migr-routine","/routine/1"))}},"RA Routine"))},J={breakExercise:{id:-1,name:"Take a Break!",image:"break.png",image_alt:"Take a Break!",sound:"break.mp3",duration:5,type:"BREAK_EXERCISE"}};function K(e,t){if("BREAK_EXERCISE"!==e.current.type)return J.breakExercise;var n=t.findIndex((function(t){return t.id===e.previous.id}));return t[n+1]}var D=Object(I.b)((function(e){var t=e.exercise,n=e.exerciseList;return{config:J,exercise:t.current,previousExercise:t.previous,nextExercise:K(t,n)}}),(function(e){return{actions:Object(s.bindActionCreators)(r,e)}}))((function(e){var t=Object(a.useState)(e.exercise.duration),n=Object(T.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(!1),s=Object(T.a)(o,2),u=s[0],l=s[1],E=Object(a.useState)(!1),m=Object(T.a)(E,2),d=m[0],f=m[1],v=e.exercise,p=e.nextExercise,b=e.actions,C=Object(N.f)(),S=Object(a.useCallback)((function(e){l(!1),i(e.duration),b.startExercise(e)}),[b]),x=Object(a.useCallback)((function(){S(p)}),[S,p]),_=Object(a.useCallback)((function(){S(v)}),[S,v]),R=Object(a.useCallback)((function(){l(!u)}),[u]),h=Object(a.useCallback)((function(){C.push("".concat("/migr-routine","/"))}),[C]);return Object(a.useEffect)((function(){r!==v.duration||u||(f(!0),P(v.sound,(function(){l(!0),f(!1)}))),0===r&&u&&P("beep.wav",x,2),r<5&&0!==r&&P("beep.wav");var e=setInterval((function(){u&&i(r-1)}),1e3);return function(){return clearInterval(e)}}),[v,x,r,u]),c.a.createElement("div",{className:"exercise"},c.a.createElement(U,{title:v.name,onCloseCallback:h}),c.a.createElement("div",{className:"exercise__body"},c.a.createElement("div",{className:"exercise__image"},c.a.createElement("img",{src:"/migr-routine/images/"+v.image,alt:v.image_alt})),c.a.createElement("div",{className:"exercise__timer"},c.a.createElement(A.a,{value:r,minValue:"0",maxValue:v.duration,text:r}))),c.a.createElement(q,null,c.a.createElement(B,{play:u,playCallback:R,nextCallback:x,previousCallback:_,disabled:d})))})),M=Object(I.b)((function(e){return{exerciseList:e.exerciseList}}),(function(e){return{actions:Object(s.bindActionCreators)(r,e)}}))(Q),$=Object(I.b)((function(e){return{exerciseList:e.routineList}}),(function(e){return{actions:Object(s.bindActionCreators)(r,e)}}))(W),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[f,u.a],n=s.applyMiddleware.apply(void 0,t),r=Object(l.composeWithDevTools)(n),a=Object(s.createStore)(j,e,r),c=Object(E.b)(a);return{store:a,persistor:c}}(),F=z.store,G=z.persistor;o.a.render(c.a.createElement(I.a,{store:F},c.a.createElement(w.a,{loading:null,persistor:G},c.a.createElement(X.a,null,c.a.createElement(N.c,null,c.a.createElement(N.a,{exact:!0,path:"/migr-routine/routine/:id",component:M}),c.a.createElement(N.a,{exact:!0,path:"/migr-routine/exercise/:id",component:D}),c.a.createElement(N.a,{exact:!0,path:"/migr-routine/",component:$}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.7c11c0f5.chunk.js.map