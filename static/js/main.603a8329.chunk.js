(this["webpackJsonpmigr-routine"]=this["webpackJsonpmigr-routine"]||[]).push([[0],{26:function(e,t,n){e.exports=n.p+"static/media/beep.9f760093.wav"},31:function(e,t,n){e.exports=n(46)},43:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"requestExerciseList",(function(){return S})),n.d(r,"requestExercises",(function(){return _})),n.d(r,"receiveExercisesSuccess",(function(){return b})),n.d(r,"receiveExercisesError",(function(){return R})),n.d(r,"startExercise",(function(){return h})),n.d(r,"ActionTypes",(function(){return C}));var a=n(0),c=n.n(a),i=n(9),o=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(1),l=n(20),u=n(21),E=n(16),m=n(23),d=n.n(m),f=function(e){return function(e){return function(t){var n=e(t);return t.type,n}}},p=n(13),v=n.n(p),x=n(24),S=function(){return function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_()),e.next=3,fetch("/migr-routine/exercise_list.json").then((function(e){return e.json()})).then((function(e){console.log("fetced data",e),t(b(e))})).catch((function(e){console.warn("data fetch errror",e),t(R("Could not fetch data"))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C={REQUEST_EXERCISES:"REQUEST_EXERCISES",RECEIVE_EXERCISES_SUCCESS:"RECEIVE_EXERCISES_SUCCESS",RECEIVE_EXERCISES_ERROR:"RECEIVE_EXERCISES_ERROR",START_EXERCISE:"START_EXERCISE",STOP_EXERCISE:"STOP_EXERCISE"};function _(){return{type:C.REQUEST_EXERCISES}}function b(e){return{type:C.RECEIVE_EXERCISES_SUCCESS,payload:e}}function R(e){return{type:C.RECEIVE_EXERCISES_ERROR,payload:e}}function h(e){return{type:C.START_EXERCISE,payload:e}}var g=Object(s.combineReducers)({exercise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.START_EXERCISE:return t.payload;case C.STOP_EXERCISE:return{};default:return e}},exerciseList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.RECEIVE_EXERCISES_SUCCESS:return t.payload.exerciseList;case C.RECEIVE_EXERCISES_SUCCESS:return[];default:return e}}}),k={key:"root",whitelist:["exerciseList"],storage:d.a},y=Object(E.a)(k,g);var I=n(4),O=n(25),j=n(7),T=n(5),N=(n(43),n(30)),X=n(17),w=n(26),L=n.n(w),A=n(27),V=(n(44),n(28)),U=n.n(V);var B=function(e){var t=e.play,n=e.playCallback,r=e.nextCallback,a=U()({"exercise-controls__play":!t,"exercise-controls__pause":t});return c.a.createElement("div",{className:"exercise-controls"},c.a.createElement("span",{className:"exercise-controls__previous"}),c.a.createElement("span",{className:a,onClick:n}),c.a.createElement("span",{className:"exercise-controls__next",onClick:r}))};var q=function(e){var t=e.title,n=e.onCloseCallback,r=Object(a.useCallback)((function(){console.log("click",typeof n),"function"===typeof n&&n()}),[n]);return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__text"},t),c.a.createElement("span",{className:"header__icon icon--close",onClick:r}))};var P=function(e){var t=e.children;return c.a.createElement("div",{className:"footer"},t)};var Q=function(e){var t=e.exerciseList,n=e.actions,r=e.match.params.id,i=Object(T.f)();Object(a.useEffect)((function(){n.requestExerciseList(r)}),[]);var o=t[0];return c.a.createElement("div",{className:"exercise-list"},c.a.createElement(q,{title:"RA routine",onCloseCallback:function(){i.goBack()}}),c.a.createElement("div",{className:"exercise-list__body"},t.map((function(e){return c.a.createElement("div",{key:e.id,className:"exercise-list__item"},e.name)}))),c.a.createElement(P,null,c.a.createElement("div",{className:"exercise-list__start",onClick:function(){n.startExercise(o),i.push("/exercise/".concat(o.id))}},"Start")))};var W=function(e){e.actions;var t=Object(T.f)();return c.a.createElement("div",{className:"routine-list"},c.a.createElement("div",{className:"routine",onClick:function(){t.push("/routine/1")}},"RA Routine"))},J={breakExercise:{id:-1,name:"Take a Break!",image:"break.png",image_alt:"Take a Break!",duration:5,order:-1}},D=Object(I.b)((function(e){var t=e.exercise,n=e.exerciseList,r=e.exerciseList.findIndex((function(e){return e.id===t.id})),a=null;return-1!==r&&r!==n.length-1&&(a=n[r+1]),{config:J,exercise:t,nextExercise:a}}),(function(e){return{actions:Object(s.bindActionCreators)(r,e)}}))((function(e){var t=Object(a.useState)(30),n=Object(X.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(!0),s=Object(X.a)(o,2),l=s[0],u=s[1],E=e.exercise,m=e.nextExercise,d=e.actions,f=e.config,p=Object(T.f)(),v=new Audio(L.a);v.muted=!1;var x=function(){m&&(-1!==E.order?setTimeout((function(){d.startExercise(Object(N.a)({},f.breakExercise,{id:E.id})),i(f.breakExercise.duration)}),500):(d.startExercise(m),i(m.duration)))};function S(e){v.addEventListener("ended",(function t(){v.removeEventListener("ended",t),e&&(S(e-1),x())})),v.play()}return Object(a.useEffect)((function(){if(r){r<6&&S();var e=setInterval((function(){l&&i(r-1)}),1e3);return function(){return clearInterval(e)}}S(1)}),[r,l]),c.a.createElement("div",{className:"exercise"},c.a.createElement(q,{title:E.name,onCloseCallback:function(){console.log("close"),p.push("/")}}),c.a.createElement("div",{className:"exercise__body"},c.a.createElement("div",{className:"exercise__image"},c.a.createElement("img",{src:"/migr-routine/images/"+E.image,alt:E.image_alt})),c.a.createElement("div",{className:"exercise__timer"},c.a.createElement(A.a,{value:r,minValue:"0",maxValue:"30",text:r}))),c.a.createElement(P,null,c.a.createElement(B,{play:l,playCallback:function(){u(!l)},nextCallback:function(){x()}})))})),M=Object(I.b)((function(e){return{exerciseList:e.exerciseList}}),(function(e){return{actions:Object(s.bindActionCreators)(r,e)}}))(Q),$=Object(I.b)((function(e){return{exerciseList:e.routineList}}),(function(e){return{actions:Object(s.bindActionCreators)(r,e)}}))(W),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[f,l.a],n=s.applyMiddleware.apply(void 0,t),r=Object(u.composeWithDevTools)(n),a=Object(s.createStore)(y,e,r),c=Object(E.b)(a);return{store:a,persistor:c}}(),F=z.store,G=z.persistor;o.a.render(c.a.createElement(I.a,{store:F},c.a.createElement(O.a,{loading:null,persistor:G},c.a.createElement(j.a,null,c.a.createElement(T.c,null,c.a.createElement(T.a,{exact:!0,path:"/migr-routine/routine/:id",component:M}),c.a.createElement(T.a,{exact:!0,path:"/migr-routine/exercise/:id",component:D}),c.a.createElement(T.a,{exact:!0,path:"/migr-routine/",component:$}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.603a8329.chunk.js.map