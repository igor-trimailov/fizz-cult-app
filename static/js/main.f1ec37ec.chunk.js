(this["webpackJsonpmigr-routine"]=this["webpackJsonpmigr-routine"]||[]).push([[0],{65:function(e,t,n){e.exports=n(82)},78:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"requestRoutinesData",(function(){return _})),n.d(r,"requestRoutines",(function(){return g})),n.d(r,"receiveRoutinesSuccess",(function(){return I})),n.d(r,"receiveRoutinesError",(function(){return O})),n.d(r,"orderRoutines",(function(){return C})),n.d(r,"orderExercises",(function(){return h})),n.d(r,"startExercise",(function(){return y})),n.d(r,"setExerciseDuration",(function(){return j})),n.d(r,"ActionTypes",(function(){return x}));var a=n(0),i=n.n(a),c=n(16),o=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(7),s=n(48),l=n(49),E=n(45),d=n(51),m=n.n(d),f=function(e){return function(e){return function(t){var n=e(t);return t.type,n}}},p=n(22),R=n(24),b=n(40),v=n.n(b),S=n(52),_=function(){return function(){var e=Object(S.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.next=3,fetch("/migr-routine/data.json").then((function(e){return e.json()})).then((function(e){console.log("fetced data",e),t(I(e))})).catch((function(e){console.warn("data fetch error",e),t(O("Could not fetch data"))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x={REQUEST_EXERCISES:"REQUEST_EXERCISES",RECEIVE_EXERCISES_SUCCESS:"RECEIVE_EXERCISES_SUCCESS",RECEIVE_EXERCISES_ERROR:"RECEIVE_EXERCISES_ERROR",ORDER_EXERCISES:"ORDER_EXERCISES",SET_EXERCISE_DURATION:"SET_EXERCISE_DURATION",REQUEST_ROUTINES:"REQUEST_ROUTINES",RECEIVE_ROUTINES_SUCCESS:"RECEIVE_ROUTINES_SUCCESS",RECEIVE_ROUTINES_ERROR:"RECEIVE_ROUTINES_ERROR",ORDER_ROUTINES:"ORDER_ROUTINES",START_EXERCISE:"START_EXERCISE",STOP_EXERCISE:"STOP_EXERCISE"};function g(){return{type:x.REQUEST_ROUTINES}}function I(e){return{type:x.RECEIVE_ROUTINES_SUCCESS,payload:e}}function O(e){return{type:x.RECEIVE_ROUTINES_ERROR,payload:e}}function C(e){return{type:x.ORDER_ROUTINES,payload:e}}function h(e){return{type:x.ORDER_EXERCISES,payload:e}}function y(e){return{type:x.START_EXERCISE,payload:e}}function j(e){return{type:x.SET_EXERCISE_DURATION,payload:e}}var T=n(15),N={previous:null,current:null};var k=Object(u.combineReducers)({exercise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.START_EXERCISE:return null===e.current?Object(R.a)({},e,{current:t.payload}):{previous:e.current,current:t.payload};case x.STOP_EXERCISE:return N;default:return e}},exercises:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.RECEIVE_ROUTINES_SUCCESS:return t.payload.routines.reduce((function(e,t){return Object(R.a)({},e,Object(p.a)({},t.id,t.exercises))}),{});case x.ORDER_EXERCISES:var n=t.payload,r=n.routineId,a=n.exercises;return Object(R.a)({},e,Object(p.a)({},r,e[r].length===a.length?a:e));case x.SET_EXERCISE_DURATION:var i=t.payload,c=i.routineId,o=i.exerciseId,u=i.duration;return Object(R.a)({},e,Object(p.a)({},c,e[c].map((function(e){return e.id===o?Object(R.a)({},e,{duration:u}):e}))));default:return e}},routines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.RECEIVE_ROUTINES_SUCCESS:return t.payload.routines.map((function(e){return Object(T.omit)(e,"exercises")}));case x.ORDER_ROUTINES:return e.length===t.payload.length?t.payload:e;default:return e}}}),w={key:"root",whitelist:["routines","exercises"],storage:m.a},U=Object(E.a)(w,k);var X=n(12),D=n(53),A=n(19),V=n(18),P=(n(78),n(23)),B=n(41),K=(n(79),n(3)),M=n.n(K);var L=i.a.memo((function(e){var t=e.play,n=e.playCallback,r=e.nextCallback,a=e.previousCallback,c=e.disabled,o=M()("exercise-controls",{"exercise-controls--disabled":c}),u=M()({"exercise-controls__play":!t,"exercise-controls__pause":t});return i.a.createElement("div",{className:o},i.a.createElement("span",{className:"exercise-controls__previous",onClick:a}),i.a.createElement("span",{className:u,onClick:function(){c||n()}}),i.a.createElement("span",{className:"exercise-controls__next",onClick:r}))}));var Q=i.a.memo((function(){return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"header__title"},"Migr Exercise Routines"),i.a.createElement("div",{className:"header__nav"},i.a.createElement("div",{className:"header__nav-item"},"About"),i.a.createElement("div",{className:"header__nav-item"},"Login")))}));var q=function(e){var t=e.children;return i.a.createElement("div",{className:"footer"},t)};function W(){var e=Object(V.h)().pathname;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var H=function(){return window.AudioManager||(window.AudioManager=new Audio),window.AudioManager};function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e){var r=H();r.src="/migr-routine/sounds/"+e;var a=function e(){r.removeEventListener("ended",e),0===(n-=1)?"function"===typeof t&&t():(r.addEventListener("ended",e),r.play())};r.addEventListener("ended",a),r.play()}else console.warn("Sound: "+e+" was not found")}function z(e,t,n){if(e.destination&&e.destination.index!==e.source.index){var r=function(e,t,n){var r=Array.from(e),a=r.splice(t,1),i=Object(P.a)(a,1)[0];return r.splice(n,0,i),r}(t,e.source.index,e.destination.index);"function"===typeof n&&n(r)}}var Y=n(88),$=n(89),F=n(62),G=n(14),Z=n(93),ee=n(64),te=n(86),ne=n(87),re=n(35);var ae=function(e){var t=e.actions,n=e.routineId,r=e.exercise,a=e.index;return i.a.createElement(G.b,{draggableId:r.id.toString(),index:a},(function(e){return i.a.createElement(ee.a,Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),i.a.createElement("div",{className:"exercise-list-item"},i.a.createElement("div",{className:"exercise-list-item__name"},r.name),i.a.createElement("div",{className:"exercise-list-item__duration"},i.a.createElement(te.a,{as:ne.a,key:"".concat(r.id,"-duration"),id:"dropdown-button-drop-duration",drop:"down",variant:"secondary",title:" Duration: ".concat(r.duration," "),onSelect:function(e){t.setExerciseDuration({routineId:n,exerciseId:r.id,duration:e})}},i.a.createElement(re.a.Item,{eventKey:"15"},"15"),i.a.createElement(re.a.Item,{eventKey:"30"},"30"),i.a.createElement(re.a.Item,{eventKey:"45"},"45"),i.a.createElement(re.a.Item,{eventKey:"60"},"60")))))}))};var ie=function(e){var t=e.actions,n=e.routineId,r=e.exercises,a=e.onExerciseClick,c=function(e){t.orderExercises({routineId:n,exercises:e})};return i.a.createElement(G.a,{onDragEnd:function(e){z(e,r,c)}},i.a.createElement(G.c,{droppableId:"list"},(function(e){return i.a.createElement(Z.a,Object.assign({ref:e.innerRef},e.droppableProps),r.map((function(e,r){return i.a.createElement(ae,{actions:t,exercise:e,routineId:n,index:r,key:e.id,selectExercise:a})})),e.placeholder)})))};var ce=function(e){var t=e.exercises,n=e.routineId,r=e.actions,a=Object(V.g)();return i.a.createElement("div",{className:"exercises"},i.a.createElement(Q,null),i.a.createElement(Y.a,{fluid:!0},i.a.createElement($.a,null,i.a.createElement("h2",null,"Start your exercise by pressing start button!"),i.a.createElement("p",null,"You can change the order of exercises by dragging them around until you are completely happy with the new order"),i.a.createElement("p",null,i.a.createElement(F.a,{variant:"secondary",onClick:function(){H();var e=t[0];e&&(r.startExercise(e),a.push("/migr-routine"+"/routine/".concat(n,"/exercise/").concat(e.id)))}},"Start routine!")))),i.a.createElement(ie,{actions:r,exercises:t,routineId:n}))},oe=n(90),ue=n(91),se=n(92);var le=function(e){var t=e.routine,n=e.index,r=e.selectRoutine,a=function(){r(t.id)};return i.a.createElement(G.b,{draggableId:t.id.toString(),index:n},(function(e){return i.a.createElement(se.a,Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{border:"light"}),i.a.createElement(se.a.Body,null,i.a.createElement(se.a.Title,null,t.name),i.a.createElement(se.a.Text,null,t.description),i.a.createElement(F.a,{variant:"primary",onClick:a},"Start routine!")))}))};var Ee=function(e){var t=e.actions,n=e.routines,r=Object(V.g)();Object(a.useEffect)((function(){t.requestRoutinesData()}),[t]);var c=function(e){t.orderRoutines(e)},o=function(e){r.push("/migr-routine/routine/"+e)};return i.a.createElement("div",{className:"routines"},i.a.createElement(Q,null),i.a.createElement(Y.a,{fluid:!0},i.a.createElement($.a,null,i.a.createElement("div",{className:"routines__jumbotron"},i.a.createElement("div",{className:"routines__jumbotron-text"},i.a.createElement("h2",null,"Start your exercise by selecting one of the routines!"),i.a.createElement("p",null,"Select one of the available routines and start your exercise! More routines will be available soonish")),i.a.createElement("div",{className:"routines__jumbotron-image"},i.a.createElement(oe.a,{src:"/migr-routine/images/logo.png",fluid:!0}))))),i.a.createElement(G.a,{onDragEnd:function(e){z(e,n,c)}},i.a.createElement(G.c,{droppableId:"list"},(function(e){return i.a.createElement(ue.a,Object.assign({ref:e.innerRef},e.droppableProps),n.map((function(e,t){return i.a.createElement(le,{routine:e,index:t,key:e.id,selectRoutine:o})})),e.placeholder)}))))},de={breakExercise:{id:-1,name:"Take a Break!",image:"break.png",image_alt:"Take a Break!",sound:"break.mp3",duration:5,type:"BREAK_EXERCISE"}};function me(e,t){if(!e.current)return null;if("BREAK_EXERCISE"!==e.current.type)return de.breakExercise;var n=t.findIndex((function(t){return t.id===e.previous.id}));return t[n+1]}var fe=Object(X.b)((function(e,t){var n=e.exercise,r=e.exercises,a=Object(T.get)(t,"match.params.routineId");return{config:de,routineId:a,exercise:n.current,previousExercise:n.previous,nextExercise:me(n,r[a])}}),(function(e){return{actions:Object(u.bindActionCreators)(r,e)}}))((function(e){var t=e.exercise,n=e.nextExercise,r=e.actions,c=Object(a.useState)(Object(T.get)(t,"duration",30)),o=Object(P.a)(c,2),u=o[0],s=o[1],l=Object(a.useState)(!1),E=Object(P.a)(l,2),d=E[0],m=E[1],f=Object(a.useState)(!1),p=Object(P.a)(f,2),R=p[0],b=p[1],v=Object(V.g)(),S=Object(a.useCallback)((function(e){e&&(m(!1),s(e.duration),r.startExercise(e))}),[r]),_=Object(a.useCallback)((function(){S(n)}),[S,n]),x=Object(a.useCallback)((function(){S(t)}),[S,t]),g=Object(a.useCallback)((function(){m(!d)}),[d]),I=Object(a.useCallback)((function(){v.push("".concat("/migr-routine","/"))}),[v]);return Object(a.useEffect)((function(){if(t){u!==t.duration||d||(b(!0),J(t.sound,(function(){m(!0),b(!1)}))),0===u&&d&&J("beep.wav",_,2),u<5&&0!==u&&J("beep.wav");var e=setInterval((function(){d&&s(u-1)}),1e3);return function(){return clearInterval(e)}}}),[t,_,u,d]),t?i.a.createElement("div",{className:"exercise"},i.a.createElement(Q,{title:t.name,onCloseCallback:I}),i.a.createElement("div",{className:"exercise__body"},i.a.createElement("div",{className:"exercise__image"},i.a.createElement("img",{src:"/migr-routine/images/"+t.image,alt:t.image_alt})),i.a.createElement("div",{className:"exercise__timer"},i.a.createElement(B.a,{value:u,minValue:"0",maxValue:t.duration,text:u,styles:Object(B.b)({strokeLinecap:"butt",textSize:"20px",pathTransitionDuration:.5,pathColor:"#13a0c3",textColor:"#13a0c3",trailColor:"#d6d6d6",backgroundColor:"#3e98c7"})}))),i.a.createElement(q,null,i.a.createElement(L,{play:d,playCallback:g,nextCallback:_,previousCallback:x,disabled:R}))):i.a.createElement(V.a,{to:"".concat("/migr-routine","/")})})),pe=Object(X.b)((function(e,t){var n=Object(T.get)(t,"match.params.routineId");return{routineId:n,exercises:Object(T.get)(e,["exercises",n],[])}}),(function(e){return{actions:Object(u.bindActionCreators)(r,e)}}))(ce),Re=Object(X.b)((function(e){return{routines:e.routines}}),(function(e){return{actions:Object(u.bindActionCreators)(r,e)}}))(Ee),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[f,s.a],n=u.applyMiddleware.apply(void 0,t),r=Object(l.composeWithDevTools)(n),a=Object(u.createStore)(U,e,r),i=Object(E.b)(a);return{store:a,persistor:i}}(),ve=be.store,Se=be.persistor;o.a.render(i.a.createElement(X.a,{store:ve},i.a.createElement(D.a,{loading:null,persistor:Se},i.a.createElement(A.a,{onUpdate:function(){return window.scrollTo(0,0)}},i.a.createElement(W,null),i.a.createElement(V.d,null,i.a.createElement(V.b,{exact:!0,path:"/migr-routine/routine/:routineId",component:pe}),i.a.createElement(V.b,{exact:!0,path:"/migr-routine/routine/:routineId/exercise/:exerciseId",component:fe}),i.a.createElement(V.b,{exact:!0,path:"/migr-routine/",component:Re}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.f1ec37ec.chunk.js.map